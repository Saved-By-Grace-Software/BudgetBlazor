@inherits LayoutComponentBase

<AuthorizeView>
    <Authorized>
        <PageTitle>BudgetBlazor</PageTitle>

        <MudThemeProvider Theme="_currentTheme"/>
        <MudDialogProvider
            FullWidth="true"
            MaxWidth="MaxWidth.Small"
            CloseButton="true"
            DisableBackdropClick="true"
            NoHeader="false"
            Position="DialogPosition.Center"
            CloseOnEscapeKey="true"
        />
        <MudSnackbarProvider/>

        <MudLayout>
            <AppBar OnSidebarToggled="ToggleSidebar" OnThemeToggled="ToggleTheme" />

	        <NavMenu SideBarOpen="_sidebarOpen" />

            <MudMainContent>
                <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge">
                    @Body
                </MudContainer>
            </MudMainContent>

        </MudLayout>

    </Authorized>
    <NotAuthorized>
        <LoginRedirect />
    </NotAuthorized>
</AuthorizeView>

@code
{
    private MudTheme _currentTheme = new MudTheme();
	private bool _sidebarOpen = true;

	private void ToggleTheme(MudTheme changedTheme) => _currentTheme = changedTheme;

	private void ToggleSidebar() => _sidebarOpen = !_sidebarOpen;
}